server:
  port: 8080 # Gateway port'u
  address: 0.0.0.0

spring:
  application:
    name: api-gateway
  cloud:
    gateway: # Spring Cloud Gateway konfigürasyonu
      globalcors: # CORS ayarları (geliştirme için)
        cors-configurations:
          '[/**]':
            allowedOrigins: "*"
            allowedMethods: "*"
            allowedHeaders: "*"
      routes:
        # Customer Service Route
        - id: customer-service
          uri: http://localhost:8081
          predicates:
            - Path=/api/customer/**
          filters:
            - RewritePath=/api/customer/(?<segment>.*), /api/v1/${segment}

        # Subscription Service Route
        - id: subscription-service
          uri: http://localhost:8082
          predicates:
            - Path=/api/subscriptions/**, /api/offers/**

        # Payment Service Route
        - id: payment-service
          uri: http://localhost:8083
          predicates:
            - Path=/api/payments/**

        # Notification Service Route
        - id: notification-service
          uri: http://localhost:8084
          predicates:
            - Path=/api/notifications/**

app:
  jwt:
    secret: ${JWT_SECRET:change_me_in_env} # JWT secret (customer-service ile aynı olmalı)
    expiration-ms: 3600000

logging:
  level:
    org.springframework.cloud.gateway: DEBUG # Gateway log'larını detaylı göster
    reactor.netty: INFO

management:
  endpoints:
    web:
      exposure:
        include: health,info,gateway # Gateway endpoint'lerini expose et